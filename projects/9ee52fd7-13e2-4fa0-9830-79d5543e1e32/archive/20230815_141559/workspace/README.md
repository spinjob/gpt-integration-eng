The code provided above seems to be logically correct and well-structured. However, there are a few improvements and fixes that can be made to ensure the code works as expected. 

The main issue is that the `credentials` and `steps` variables are not defined in the `main` function. These variables should be defined or passed as arguments to the function. 

Here is the corrected code:

main.py
